#SQL[@2,N33]Result[]
drop table if exists json_table_1;

#SQL[@3,N33]Result[]
drop table if exists json_table_2;

#SQL[@4,N33]Result[]
drop table if exists json_table_3;

#SQL[@5,N34]Result[]
drop table if exists json_table_3a;

#SQL[@6,N34]Result[]
drop table if exists json_table_3b;

#SQL[@7,N33]Result[]
drop table if exists json_table_4;

#SQL[@8,N34]Result[]
drop table if exists json_table_4a;

#SQL[@9,N33]Result[]
drop table if exists json_table_5;

#SQL[@10,N34]Result[]
drop table if exists json_table_5a;

#SQL[@11,N32]Result[]
drop table if exists json_view_1;

#SQL[@12,N33]Result[]
drop table if exists json_table_6;

#SQL[@15,N34]Result[]
create table json_table_1(j1 json);

#SQL[@16,N328]Result[]
insert into json_table_1 values('{"key10": "value1", "key2": "value2"}'),('{"key1": "@#$_%^&*()!@", "key123456": 223}'),('{"芝士面包": "12abc", "key_56": 78.90}'),('{"": "", "12_key": "中文mo"}'),('{"a 1": "b 1", "13key4": "中文mo"}'),('{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}'),('{"d1": [true,false]}'),('{}');

#SQL[@17,N350]Result[]
insert into json_table_1 values('{"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee":"1234567890000000000000000000000000000000000000000000000","uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu":["aaaaaaaaaaaaaaaaaaaaaaa11111111111111111111111111111111111111"]}');

#SQL[@18,N27]Result[2, 37, 42, 41, 30, 36, 49, 21, 2, 318]
select j1 from json_table_1;
j1
{"key10": "value1", "key2": "value2"}
{"key1": "@#$_%^&*()!@", "key123456": 223}
{"key_56": 78.9, "芝士面包": "12abc"}
{"": "", "12_key": "中文mo"}
{"13key4": "中文mo", "a 1": "b 1"}
{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
{"d1": [true, false]}
{}
{"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee": "1234567890000000000000000000000000000000000000000000000", "uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu": ["aaaaaaaaaaaaaaaaaaaaaaa11111111111111111111111111111111111111"]}

#SQL[@20,N56]Result[]
create table json_table_2(j1 json not null,j2 json null);

#SQL[@21,N76]Result[]
insert into json_table_2 values('{"key1": "value1", "key2": "value2"}','{}');

#SQL[@22,N26]Result[10, 44]
select * from json_table_2;
j1  ¦  j2
{"key1": "value1", "key2": "value2"}  ¦  {}

#SQL[@23,N76]Result[]
insert into json_table_2 values('{}','{"key1": "value1", "key2": "value2"}');

#SQL[@24,N100]Result[97, 97]
select '{"key1": "value1", "key2": "value2"}','{}','{"芝士面包": "12abc", "123456": "中文mo"}';
{"key1": "value1", "key2": "value2"}  ¦  {}  ¦  {"芝士面包": "12abc", "123456": "中文mo"}
{"key1": "value1", "key2": "value2"}  ¦  {}  ¦  {"芝士面包": "12abc", "123456": "中文mo"}

#SQL[@26,N41]Result[]
create table json_table_3(id int,j1 json);

#SQL[@27,N1513]Result[]
Insert into json_table_3 values (1,'{
    "pages": [
        "pages/news/news",
        "pages/index/index",
        "pages/movie/movie",
        "pages/logs/logs"
    ],
    "window": {
        "backgroundTextStyle": "light",
        "navigationBarBackgroundColor": "white",
        "navigationBarTitleText": "哈哈",
        "navigationBarTextStyle": "black",
        "navigationStyle": "custom",
        "backgroundColor": "#ffffff"
    },
    "tabBar": {
        "color": "#000",
        "borderStyle": "black",
        "selectedColor": "#ff6600",
        "position": "bottom",
        "custom": "false",
        "list": [
            {
                "pagePath": "pages/news/news",
                "text": "新闻",
                "iconPath": "pages/images/yuedu.png",
                "selectedIconPath": "pages/images/193.jpg"
            },
            {
                "pagePath": "pages/movie/movie",
                "text": "电影",
                "iconPath": "pages/images/diany.png",
                "selectedIconPath": "pages/images/506.jpg"
            }
        ]
    },

    "networkTimeout": {
        "request": 6000,
        "downloadFile": 60000,
        "connectSocket": 60000 ,
        "uploadFile": 60000
    },
    "debug": true,
    "requiredBackgroundModes": [
        "audio",
        "location"
    ],
    "permission": {
        "scope.userLocation": {
            "desc": "你的位置信息将用于小程序位置接口的效果展示"
        }
    },
    "style": "v2"
}
');

#SQL[@83,N26]Result[10, 1013]
select * from json_table_3;
id  ¦  j1
1  ¦  {"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}

#SQL[@86,N35]Result[]
create table json_table_3a(j1 json);

#SQL[@87,N99]Result[]
insert into json_table_3a values('{"x": 17, "x": "red"}'),('{"x": 17, "x": "red", "x": [3, 5, 7]}');

#SQL[@88,N27]Result[2, 12, 16]
select * from json_table_3a;
j1
{"x": "red"}
{"x": [3, 5, 7]}

#SQL[@91,N34]Result[]
create table json_table_4(j1 json);

#SQL[@92,N41]Error[31]
insert into json_table_4 values('[1, 2,');
invalid input: json text [1, 2,

#SQL[@93,N63]Error[59]
insert into json_table_4 values('{"key1": NULL, "": "value2"}');
invalid input: json text {\"key1\": NULL, \"\": \"value2\"}

#SQL[@94,N35]Error[25]
insert into json_table_4 values('');
invalid input: json text 

#SQL[@99,N69]Error[53]
select j1 from json_table_1 where j1>'{"": "", "123456": "中文mo"}';
invalid argument operator >, bad value [JSON VARCHAR]

#SQL[@102,N55]Result[]
create table json_table_61(j1 json,a varchar(25),b int);

#SQL[@103,N136]Result[]
insert into json_table_61 values('{"010": "beijing", "021": "shanghai"}','apple',345),('{"phonenum":"17290839029","age":"45"}','pear',0);

#SQL[@104,N27]Result[16, 57, 57]
select * from json_table_61;
j1  ¦  a  ¦  b
{"010": "beijing", "021": "shanghai"}  ¦  apple  ¦  345
{"age": "45", "phonenum": "17290839029"}  ¦  pear  ¦  0

#SQL[@105,N82]Result[]
update json_table_61 set j1='{"010": [56,"beijing","2002-09-09"]}' where a='apple';

#SQL[@106,N27]Result[16, 57, 58]
select * from json_table_61;
j1  ¦  a  ¦  b
{"age": "45", "phonenum": "17290839029"}  ¦  pear  ¦  0
{"010": [56, "beijing", "2002-09-09"]}  ¦  apple  ¦  345

#SQL[@107,N48]Result[]
update json_table_61 set j1='{"010": "beijing"}';

#SQL[@110,N35]Result[]
delete from json_table_61 where b=0;

#SQL[@111,N27]Result[16, 38]
select * from json_table_61;
j1  ¦  a  ¦  b
{"010": "beijing"}  ¦  apple  ¦  345

#SQL[@112,N25]Result[]
delete from json_table_61;

#SQL[@113,N27]Result[]
select * from json_table_61;

#SQL[@116,N35]Result[9, 1]
select count(j1) from json_table_1 ;
count(j1)
9

#SQL[@117,N33]Error[57]
select max(j1) from json_table_1 ;
invalid argument aggregate function max, bad value [JSON]

#SQL[@118,N33]Error[57]
select min(j1) from json_table_1 ;
invalid argument aggregate function min, bad value [JSON]

#SQL[@121,N42]Result[]
create table json_table_3b(d1 int,j1 json);

#SQL[@122,N518]Result[]
insert into json_table_3b values(34,'{"key10": "value1", "key2": "value2"}'),(50,'{"key1": "@#$_%^&*()!@", "123456": "中文mo"}'),(1,'{"芝士面包": "12abc", "123456": "中文mo"}'),(45,'{"": "", "123456": "中文mo"}'),(22,'{"a 1": "b 1", "123456": "中文mo"}'),(88,'{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}'),(4,'{"key10": "value1", "key2": "value2"}'),(501,'{"key1": "@#$_%^&*()!@", "123456": "中文mo"}'),(1111,'{"芝士面包": "12abc", "123456": "中文mo"}'),(415,'{"": "", "123456": "中文mo"}');

#SQL[@123,N60]Result[15, 39, 44, 55, 57, 57, 45]
select max(d1),j1 from json_table_3b group by j1 order by j1;
max(d1)  ¦  j1
415  ¦  {"": "", "123456": "中文mo"}
22  ¦  {"123456": "中文mo", "a 1": "b 1"}
501  ¦  {"123456": "中文mo", "key1": "@#$_%^&*()!@"}
1111  ¦  {"123456": "中文mo", "芝士面包": "12abc"}
88  ¦  {"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
34  ¦  {"key10": "value1", "key2": "value2"}

#SQL[@124,N40]Result[2, 30, 30, 36, 46, 46, 47, 47, 49, 37, 37]
select j1 from json_table_3b order by j1;
j1
{"": "", "123456": "中文mo"}
{"": "", "123456": "中文mo"}
{"123456": "中文mo", "a 1": "b 1"}
{"123456": "中文mo", "key1": "@#$_%^&*()!@"}
{"123456": "中文mo", "key1": "@#$_%^&*()!@"}
{"123456": "中文mo", "芝士面包": "12abc"}
{"123456": "中文mo", "芝士面包": "12abc"}
{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
{"key10": "value1", "key2": "value2"}
{"key10": "value1", "key2": "value2"}

#SQL[@127,N47]Result[10, 1013]
select * from json_table_3 where j1 is not null;
id  ¦  j1
1  ¦  {"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}

#SQL[@128,N44]Result[]
select * from json_table_3 where j1 is  null;

#SQL[@131,N53]Result[]
create view json_view_1 as select * from json_table_1;

#SQL[@132,N25]Result[2, 37, 42, 41, 30, 36, 49, 21, 2, 318]
select * from json_view_1;
j1
{"key10": "value1", "key2": "value2"}
{"key1": "@#$_%^&*()!@", "key123456": 223}
{"key_56": 78.9, "芝士面包": "12abc"}
{"": "", "12_key": "中文mo"}
{"13key4": "中文mo", "a 1": "b 1"}
{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
{"d1": [true, false]}
{}
{"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee": "1234567890000000000000000000000000000000000000000000000", "uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu": ["aaaaaaaaaaaaaaaaaaaaaaa11111111111111111111111111111111111111"]}

#SQL[@135,N42]Result[]
create table json_table_81(d1 int,j1 json);

#SQL[@136,N115]Result[]
load data infile'$resources/json/json_table_3.txt' into table json_table_81 fields terminated by '|' ignore 1 lines;

#SQL[@137,N27]Result[10, 1013]
select * from json_table_81;
d1  ¦  j1
1  ¦  {"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}

#SQL[@138,N42]Result[]
create table json_table_82(d2 int,j2 json);

#SQL[@139,N53]Result[]
insert into json_table_82 select * from json_table_81;

#SQL[@140,N27]Result[10, 1013]
select * from json_table_82;
d2  ¦  j2
1  ¦  {"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}

#SQL[@143,N45]Result[]
create temporary table json_table_4a(j1 json);

#SQL[@144,N72]Result[]
insert into json_table_4a values('{"key1": "value1", "key2": "value2"}');

#SQL[@145,N27]Result[2, 36]
select * from json_table_4a;
j1
{"key1": "value1", "key2": "value2"}

#SQL[@146,N169]Result[]
create external table json_table_5a(d1 int,j1 json)infile{"filepath"='$resources/json/json_table_3.txt'} fields terminated by '|' lines terminated by '\n' ignore 1 lines;

#SQL[@147,N27]Result[10, 1013]
select * from json_table_5a;
d1  ¦  j1
1  ¦  {"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}

#SQL[@150,N63]Result[2, 1006, 37, 42, 41, 30, 36, 49, 21, 2, 318]
select j1 from  json_table_1 union select j1 from  json_table_3;
j1
{"debug": true, "networkTimeout": {"connectSocket": 60000, "downloadFile": 60000, "request": 6000, "uploadFile": 60000}, "pages": ["pages/news/news", "pages/index/index", "pages/movie/movie", "pages/logs/logs"], "permission": {"scope.userLocation": {"desc": "你的位置信息将用于小程序位置接口的效果展示"}}, "requiredBackgroundModes": ["audio", "location"], "style": "v2", "tabBar": {"borderStyle": "black", "color": "#000", "custom": "false", "list": [{"iconPath": "pages/images/yuedu.png", "pagePath": "pages/news/news", "selectedIconPath": "pages/images/193.jpg", "text": "新闻"}, {"iconPath": "pages/images/diany.png", "pagePath": "pages/movie/movie", "selectedIconPath": "pages/images/506.jpg", "text": "电影"}], "position": "bottom", "selectedColor": "#ff6600"}, "window": {"backgroundColor": "#ffffff", "backgroundTextStyle": "light", "navigationBarBackgroundColor": "white", "navigationBarTextStyle": "black", "navigationBarTitleText": "哈哈", "navigationStyle": "custom"}}
{"key10": "value1", "key2": "value2"}
{"key1": "@#$_%^&*()!@", "key123456": 223}
{"key_56": 78.9, "芝士面包": "12abc"}
{"": "", "12_key": "中文mo"}
{"13key4": "中文mo", "a 1": "b 1"}
{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
{"d1": [true, false]}
{}
{"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee": "1234567890000000000000000000000000000000000000000000000", "uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu": ["aaaaaaaaaaaaaaaaaaaaaaa11111111111111111111111111111111111111"]}

#SQL[@151,N67]Result[]
select j1 from  json_table_1 intersect select j1 from  json_table_3;

#SQL[@152,N63]Result[2, 37, 42, 41, 30, 36, 49, 21, 2, 318]
select j1 from  json_table_1 minus select j1 from  json_table_3;
j1
{"key10": "value1", "key2": "value2"}
{"key1": "@#$_%^&*()!@", "key123456": 223}
{"key_56": 78.9, "芝士面包": "12abc"}
{"": "", "12_key": "中文mo"}
{"13key4": "中文mo", "a 1": "b 1"}
{"d1": "2020-10-09", "d2": "2019-08-20 12:30:00"}
{"d1": [true, false]}
{}
{"eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee": "1234567890000000000000000000000000000000000000000000000", "uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu": ["aaaaaaaaaaaaaaaaaaaaaaa11111111111111111111111111111111111111"]}

#SQL[@155,N35]Result[]
create table json_table_71(j1 json);

#SQL[@156,N411]Result[]
insert into  json_table_71 values('{
    "orderType": "BUY",
    "orderId": 20768330,
    "syncAction": "market_order",
    "itemCode": "DT_GOODS",
    "maxOfPeople": 214748,
    "itemName": "试用规格",
    "payFee": 0,
    "serviceStopTime": 1608825600000,
    "serviceStartTime": 1607481719000,
    "minOfPeople": 0,
    "paidtime": 1607481718000,
    "syncSeq": "0CD53B341284A223363FD8E4ACIHWBU98283"
}');

#SQL[@170,N56]Result[29, 5]
select json_extract(j1,'$.orderType') from json_table_71;
json_extract(j1, $.orderType)
"BUY"

#SQL[@171,N58]Result[31, 4]
select json_extract(j1,'$.orderType.*') from json_table_71;
json_extract(j1, $.orderType.*)
null

#SQL[@172,N48]Result[21, 160]
select json_extract(j1,'$.*') from json_table_71;
json_extract(j1, $.*)
["DT_GOODS", "试用规格", 214748, 0, 20768330, "BUY", 1607481718000, 0, 1607481719000, 1608825600000, "market_order", "0CD53B341284A223363FD8E4ACIHWBU98283"]

#SQL[@173,N58]Result[30, 14]
select  json_extract(j1,'$**.itemName') from json_table_71;
json_extract(j1, $**.itemName)
"试用规格"

#SQL[@174,N50]Result[22, 4]
select  json_extract(j1,'$[*]') from json_table_71;
json_extract(j1, $[*])
null

#SQL[@175,N50]Result[22, 324]
select  json_extract(j1,'$[0]') from json_table_71;
json_extract(j1, $[0])
{"itemCode": "DT_GOODS", "itemName": "试用规格", "maxOfPeople": 214748, "minOfPeople": 0, "orderId": 20768330, "orderType": "BUY", "paidtime": 1607481718000, "payFee": 0, "serviceStartTime": 1607481719000, "serviceStopTime": 1608825600000, "syncAction": "market_order", "syncSeq": "0CD53B341284A223363FD8E4ACIHWBU98283"}

#SQL[@176,N47]Result[19, 324]
select  json_extract(j1,'$') from json_table_71;
json_extract(j1, $)
{"itemCode": "DT_GOODS", "itemName": "试用规格", "maxOfPeople": 214748, "minOfPeople": 0, "orderId": 20768330, "orderType": "BUY", "paidtime": 1607481718000, "payFee": 0, "serviceStartTime": 1607481719000, "serviceStopTime": 1608825600000, "syncAction": "market_order", "syncSeq": "0CD53B341284A223363FD8E4ACIHWBU98283"}

#SQL[@177,N58]Result[31, 4]
select json_extract(j1,'$.itemName[2]') from json_table_71;
json_extract(j1, $.itemName[2])
null

#SQL[@178,N60]Result[33, 1]
select json_extract(j1,'$**.minOfPeople') from json_table_71;
json_extract(j1, $**.minOfPeople)
0

#SQL[@179,N66]Result[56, 4]
select json_extract(' {"a": [1, "2", {"aa": "bb"}]} ','$.a[2].aa');
json_extract( {"a": [1, "2", {"aa": "bb"}]} , $.a[2].aa)
"bb"

#SQL[@180,N167]Result[157, 4]
select json_extract(' {"a": [1, "2", {"aa": ["yyy",56,89,{"aa2": ["aa3",{"aa4": [1,2,{"aa5": ["aa6", {"aa7": "bb"}]}]}]}]}]} ','$.a[2].aa[3].aa2[1].aa4[2].aa5[1].aa7');
json_extract( {"a": [1, "2", {"aa": ["yyy",56,89,{"aa2": ["aa3",{"aa4": [1,2,{"aa5": ["aa6", {"aa7": "bb"}]}]}]}]}]} , $.a[2].aa[3].aa2[1].aa4[2].aa5[1].aa7)
"bb"

#SQL[@181,N65]Result[54, 8]
select json_extract('{"a":1,"b":2,"c":3,"d":{"a":"x"}}', '$**.a');
json_extract({"a":1,"b":2,"c":3,"d":{"a":"x"}}, $**.a)
[1, "x"]

#SQL[@182,N80]Result[70, 4]
select json_extract(' {"a.f": [1, "2", {"aa.f": "bb"}],"e.a.b":"888"} ','$**.f');
json_extract( {"a.f": [1, "2", {"aa.f": "bb"}],"e.a.b":"888"} , $**.f)
null

#SQL[@185,N50]Error[39]
select  json_extract('{"a":"a1","b":"b1"}','$.**');
invalid input: invalid json path '$.**'

#SQL[@186,N32]Error[28]
select json_extract('bar','$.*');
invalid input: json text bar

#SQL[@187,N46]Error[35]
select  json_extract(j1,'') from json_table_71;
invalid input: invalid json path ''

#SQL[@190,N34]Result[]
create table json_table_6(j1 json);

#SQL[@191,N105]Result[]
insert into json_table_6 values('{"a": [1, "2", {"aa": "bb"}]}'),('{"key1": "value1", "key2": "value2"}');

#SQL[@192,N55]Result[71, 146, 153, 145, 152, 145, 152]
select * from json_table_6,unnest(json_table_6.j1) as u;
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  a  ¦  $.a  ¦  null  ¦  [1, "2", {"aa": "bb"}]  ¦  {"a": [1, "2", {"aa": "bb"}]}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  a  ¦  $.a  ¦  null  ¦  [1, "2", {"aa": "bb"}]  ¦  {"a": [1, "2", {"aa": "bb"}]}
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  1  ¦  key2  ¦  $.key2  ¦  null  ¦  "value2"  ¦  {"key1": "value1", "key2": "value2"}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  1  ¦  key2  ¦  $.key2  ¦  null  ¦  "value2"  ¦  {"key1": "value1", "key2": "value2"}

#SQL[@193,N59]Result[71, 146, 153, 145, 152, 145, 152]
select * from json_table_6,unnest(json_table_6.j1,"$") as u;
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  a  ¦  $.a  ¦  null  ¦  [1, "2", {"aa": "bb"}]  ¦  {"a": [1, "2", {"aa": "bb"}]}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  a  ¦  $.a  ¦  null  ¦  [1, "2", {"aa": "bb"}]  ¦  {"a": [1, "2", {"aa": "bb"}]}
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  1  ¦  key2  ¦  $.key2  ¦  null  ¦  "value2"  ¦  {"key1": "value1", "key2": "value2"}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  1  ¦  key2  ¦  $.key2  ¦  null  ¦  "value2"  ¦  {"key1": "value1", "key2": "value2"}

#SQL[@194,N61]Result[71, 121, 128, 123, 130, 132, 139]
select * from json_table_6,unnest(json_table_6.j1,"$.*") as u;
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]

#SQL[@195,N145]Result[63, 156, 153, 153, 217]
select * from unnest(' {"a": [1, "2", {"aa": ["yyy",56,89,{"aa2": ["aa3",{"aa4": [1,2,{"aa5": ["aa6", {"aa7": "bb"}]}]}]}]}]} ',"$.a[2].aa") as u;
col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
UNNEST_DEFAULT  ¦  0  ¦  null  ¦  $.a[2].aa[0]  ¦  0  ¦  "yyy"  ¦  ["yyy", 56, 89, {"aa2": ["aa3", {"aa4": [1, 2, {"aa5": ["aa6", {"aa7": "bb"}]}]}]}]
UNNEST_DEFAULT  ¦  1  ¦  null  ¦  $.a[2].aa[1]  ¦  1  ¦  56  ¦  ["yyy", 56, 89, {"aa2": ["aa3", {"aa4": [1, 2, {"aa5": ["aa6", {"aa7": "bb"}]}]}]}]
UNNEST_DEFAULT  ¦  2  ¦  null  ¦  $.a[2].aa[2]  ¦  2  ¦  89  ¦  ["yyy", 56, 89, {"aa2": ["aa3", {"aa4": [1, 2, {"aa5": ["aa6", {"aa7": "bb"}]}]}]}]
UNNEST_DEFAULT  ¦  3  ¦  null  ¦  $.a[2].aa[3]  ¦  3  ¦  {"aa2": ["aa3", {"aa4": [1, 2, {"aa5": ["aa6", {"aa7": "bb"}]}]}]}  ¦  ["yyy", 56, 89, {"aa2": ["aa3", {"aa4": [1, 2, {"aa5": ["aa6", {"aa7": "bb"}]}]}]}]

#SQL[@196,N66]Result[63, 85, 87, 96]
select * from unnest(' {"a": [1, "2", {"aa": "b1"}]} ',"$.*") as u;
col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
UNNEST_DEFAULT  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "b1"}]
UNNEST_DEFAULT  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "b1"}]
UNNEST_DEFAULT  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "b1"}  ¦  [1, "2", {"aa": "b1"}]

#SQL[@197,N39]Result[]
select * from unnest(' {} ',"$.*") as u;

#SQL[@198,N55]Result[63, 84, 93, 85]
select * from unnest(' [23,"gooooogle",874] ',"$") as u;
col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
UNNEST_DEFAULT  ¦  0  ¦  null  ¦  $[0]  ¦  0  ¦  23  ¦  [23, "gooooogle", 874]
UNNEST_DEFAULT  ¦  1  ¦  null  ¦  $[1]  ¦  1  ¦  "gooooogle"  ¦  [23, "gooooogle", 874]
UNNEST_DEFAULT  ¦  2  ¦  null  ¦  $[2]  ¦  2  ¦  874  ¦  [23, "gooooogle", 874]

#SQL[@199,N64]Result[63, 94, 103, 105]
select * from unnest(' [23,"gooooogle",{"k1":89000}] ',"$") as u;
col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
UNNEST_DEFAULT  ¦  0  ¦  null  ¦  $[0]  ¦  0  ¦  23  ¦  [23, "gooooogle", {"k1": 89000}]
UNNEST_DEFAULT  ¦  1  ¦  null  ¦  $[1]  ¦  1  ¦  "gooooogle"  ¦  [23, "gooooogle", {"k1": 89000}]
UNNEST_DEFAULT  ¦  2  ¦  null  ¦  $[2]  ¦  2  ¦  {"k1": 89000}  ¦  [23, "gooooogle", {"k1": 89000}]

#SQL[@200,N67]Result[63, 82]
select * from unnest(' [23,"gooooogle",{"k1":89000}] ',"$[2]") as u;
col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
UNNEST_DEFAULT  ¦  0  ¦  k1  ¦  $[2].k1  ¦  null  ¦  89000  ¦  {"k1": 89000}

#SQL[@203,N69]Result[71, 109, 116, 113, 120]
select * from json_table_6,unnest(json_table_6.j1,"$.key1",true) as u;
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.key1  ¦  null  ¦  null  ¦  null
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.key1  ¦  null  ¦  null  ¦  null
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.key1  ¦  null  ¦  null  ¦  "value1"
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.key1  ¦  null  ¦  null  ¦  "value1"

#SQL[@204,N66]Result[71, 121, 128, 123, 130, 132, 139, 106, 113]
select * from json_table_6,unnest(json_table_6.j1,"$.a",true) as u;
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a  ¦  null  ¦  null  ¦  null
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a  ¦  null  ¦  null  ¦  null

#SQL[@205,N67]Result[]
select * from json_table_6,unnest(json_table_6.j1,"$.a[2].aa") as u;

#SQL[@208,N80]Result[71, 145, 152]
select * from json_table_6,unnest(json_table_6.j1,"$") as u where u.`key`="key1";
j1  ¦  col  ¦  seq  ¦  key  ¦  path  ¦  index  ¦  value  ¦  this
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  key1  ¦  $.key1  ¦  null  ¦  "value1"  ¦  {"key1": "value1", "key2": "value2"}

#SQL[@209,N94]Result[]
select seq,value from json_table_6,unnest(json_table_6.j1,"$.a") as u where u.`path` like "%a";

#SQL[@212,N130]Result[]
create table unnest_table_1(col0 json,col1 varchar(255),col2 int,col3 varchar(255),col4 varchar(255),col5 int,col6 json,col7 json);

#SQL[@213,N88]Result[]
insert into unnest_table_1 select * from json_table_6,unnest(json_table_6.j1,"$.*") as u;

#SQL[@214,N28]Result[74, 121, 128, 123, 130, 132, 139]
select * from unnest_table_1;
col0  ¦  col1  ¦  col2  ¦  col3  ¦  col4  ¦  col5  ¦  col6  ¦  col7
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  0  ¦  null  ¦  $.a[0]  ¦  0  ¦  1  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  1  ¦  null  ¦  $.a[1]  ¦  1  ¦  "2"  ¦  [1, "2", {"aa": "bb"}]
{"a": [1, "2", {"aa": "bb"}]}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]
{"key1": "value1", "key2": "value2"}  ¦  json_table_6.j1  ¦  2  ¦  null  ¦  $.a[2]  ¦  2  ¦  {"aa": "bb"}  ¦  [1, "2", {"aa": "bb"}]

#SQL[@217,N38]Error[28]
select * from unnest('abc',"$.*") as u;
invalid input: json text abc

#SQL[@218,N27]Error[44]
select unnest('abc',"$.*") ;
not supported: function or operator 'unnest'

#SQL[@220,N38]Result[27, 1]
select json_extract('[1,2,3]', '$[0]');
json_extract([1,2,3], $[0])
1

#SQL[@221,N38]Result[27, 1]
select json_extract('[1,2,3]', '$[1]');
json_extract([1,2,3], $[1])
2

#SQL[@222,N38]Result[27, 1]
select json_extract('[1,2,3]', '$[2]');
json_extract([1,2,3], $[2])
3

#SQL[@223,N38]Result[27, 4]
select json_extract('[1,2,3]', '$[3]');
json_extract([1,2,3], $[3])
null

#SQL[@224,N69]Result[5, 7]
SELECT JSON_EXTRACT('["apple", "banana", "cherry"]', '$[0]') AS FRUIT;
FRUIT
"apple"

#SQL[@225,N69]Result[5, 8]
SELECT JSON_EXTRACT('["apple", "banana", "cherry"]', '$[1]') AS FRUIT;
FRUIT
"banana"

#SQL[@226,N38]Result[27, 4]
select json_extract('[1,2,3]', '$[4]');
json_extract([1,2,3], $[4])
null

#SQL[@227,N38]Result[27, 4]
select json_extract('[1,2,3]', '$[5]');
json_extract([1,2,3], $[5])
null

#SQL[@228,N38]Result[27, 4]
select json_extract('[1,2,3]', '$[6]');
json_extract([1,2,3], $[6])
null

