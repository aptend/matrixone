#SQL[@1,N30]Result[]
drop database if exists testdb;

#SQL[@2,N22]Result[]
create database testdb;

#SQL[@3,N10]Result[]
use testdb;

#SQL[@6,N58]Result[]
create table t1(a int primary key, b int, c int, index(b));

#SQL[@7,N61]Result[]
insert into t1 select *,*,* from generate_series(1, 1000000)g;

#SQL[@8,N28]Result[1, 1]
select c from t1 where a = 3;
c
3

#SQL[@10,N26]Result[]
delete from t1 where a = 3;

#SQL[@11,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@12,N26]Result[]
delete from t1 where a = 3;

#SQL[@13,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@14,N26]Result[]
delete from t1 where a = 3;

#SQL[@15,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@16,N35]Result[24, 84]
select mo_ctl('dn','checkpoint','');
mo_ctl(dn, checkpoint, )
{
  "method": "Checkpoint",
  "result": [
    {
      "returnStr": "OK"
    }
  ]
}


#SQL[@18,N26]Result[]
delete from t1 where a = 3;

#SQL[@19,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@20,N26]Result[]
delete from t1 where a = 3;

#SQL[@21,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@22,N26]Result[]
delete from t1 where a = 3;

#SQL[@23,N28]Result[]
insert into t1 values(3,3,3);

#SQL[@25,N28]Result[1, 1]
select c from t1 where b = 3;
c
3

#SQL[@26,N35]Result[1, 1, 1, 1]
select c from t1 where b in (1,2,3);
c
3
1
2

#SQL[@27,N35]Result[1, 1, 1, 1]
select c from t1 where a in (1,2,3);
c
3
1
2

#SQL[@28,N13]Result[]
drop table t1;

#SQL[@31,N46]Result[]
create table t2(a int, b int, c int, index(b));

#SQL[@32,N61]Result[]
insert into t2 select *,*,* from generate_series(1, 1000000)g;

#SQL[@33,N28]Result[1, 1]
select c from t2 where b = 1;
c
1

#SQL[@34,N35]Result[1, 1, 1, 1]
select c from t2 where b in (1,2,3);
c
1
2
3

#SQL[@36,N13]Result[]
drop table t2;

#SQL[@40,N48]Result[]
create table t3(a int primary key, b int, c int);

#SQL[@41,N61]Result[]
insert into t3 select *,*,* from generate_series(1, 1000000)g;

#SQL[@42,N35]Result[1, 1, 1, 1]
select c from t3 where a in (1,2,3);
c
1
2
3

#SQL[@44,N13]Result[]
drop table t3;

#SQL[@48,N64]Result[]
create table t4(a int, b int, c int, d int, primary key (a,b,c));

#SQL[@49,N63]Result[]
insert into t4 select *,*,*,* from generate_series(1, 1000000)g;

#SQL[@50,N35]Result[1, 1, 1, 1]
select d from t4 where a in (1,2,3);
d
1
2
3

#SQL[@51,N116]Result[]
prepare s1 from insert into t4(a, b, c, d) values(?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?), (?, ?, ?, ?),(?, ?, ?, ?);

#SQL[@52,N11]Result[]
set @a = -1;

#SQL[@53,N11]Result[]
set @b = -2;

#SQL[@54,N11]Result[]
set @c = -3;

#SQL[@55,N11]Result[]
set @d = -4;

#SQL[@56,N10]Result[]
set @e =-5;

#SQL[@57,N80]Result[]
execute s1 using @a,@a,@a,@a, @b,@b,@b,@b, @c,@c,@c,@c, @d,@d,@d,@d, @e,@e,@e,@e;

#SQL[@58,N44]Result[1, 2, 2, 2, 2, 2]
select d from t4 where a in (-1,-2,-3,-4,-5);
d
-5
-4
-3
-2
-1

#SQL[@59,N13]Result[]
drop table t4;

#SQL[@60,N20]Result[]
drop database testdb;

