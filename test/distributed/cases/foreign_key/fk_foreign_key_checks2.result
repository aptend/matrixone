#SQL[@1,N46]Result[]
drop database if exists fk_foreign_key_checks2;

#SQL[@2,N38]Result[]
create database fk_foreign_key_checks2;

#SQL[@3,N26]Result[]
use fk_foreign_key_checks2;

#SQL[@5,N24]Result[]
SET FOREIGN_KEY_CHECKS=0;

#SQL[@9,N23]Result[]
drop table if exists t1;

#SQL[@10,N106]Result[]
create table t1( b int, constraint `c1` foreign key `fk1` (b) references fk_foreign_key_checks2_db0.t2(a));

#SQL[@12,N50]Result[]
drop database if exists fk_foreign_key_checks2_db0;

#SQL[@13,N42]Result[]
create database fk_foreign_key_checks2_db0;

#SQL[@16,N50]Result[]
drop table if exists fk_foreign_key_checks2_db0.t2;

#SQL[@17,N67]Result[]
create table fk_foreign_key_checks2_db0.t2(a int primary key,b int);

#SQL[@20,N66]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (1,1),(2,2),(3,3);

#SQL[@21,N33]Result[]
insert into t1 values (1),(2),(3);

#SQL[@23,N24]Result[]
SET FOREIGN_KEY_CHECKS=1;

#SQL[@26,N53]Error[84]
delete from fk_foreign_key_checks2_db0.t2 where a = 1;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@29,N25]Error[80]
insert into t1 values (4);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@32,N60]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (4,4),(5,5);

#SQL[@35,N25]Result[]
insert into t1 values (4);

#SQL[@38,N53]Error[84]
delete from fk_foreign_key_checks2_db0.t2 where a = 4;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@41,N53]Result[]
delete from fk_foreign_key_checks2_db0.t2 where a = 5;

#SQL[@43,N50]Result[]
drop database if exists fk_foreign_key_checks2_db1;

#SQL[@44,N42]Result[]
create database fk_foreign_key_checks2_db1;

#SQL[@46,N50]Result[]
drop table if exists fk_foreign_key_checks2_db1.t3;

#SQL[@47,N133]Result[]
create table fk_foreign_key_checks2_db1.t3( b int, constraint `c1` foreign key `fk1` (b) references fk_foreign_key_checks2_db0.t2(a));

#SQL[@50,N64]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (1),(2),(3),(4);

#SQL[@53,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (5);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@56,N53]Error[84]
delete from fk_foreign_key_checks2_db0.t2 where a = 3;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@59,N40]Error[81]
drop table fk_foreign_key_checks2_db0.t2;
internal error: can not drop table 't2' referenced by some foreign key constraint

#SQL[@61,N24]Result[]
SET FOREIGN_KEY_CHECKS=0;

#SQL[@64,N25]Result[]
insert into t1 values (5);

#SQL[@65,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (5);

#SQL[@68,N53]Result[]
delete from fk_foreign_key_checks2_db0.t2 where a = 3;

#SQL[@71,N40]Result[]
drop table fk_foreign_key_checks2_db0.t2;

#SQL[@74,N25]Result[]
insert into t1 values (6);

#SQL[@75,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (6);

#SQL[@77,N24]Result[]
SET FOREIGN_KEY_CHECKS=1;

#SQL[@80,N25]Result[]
insert into t1 values (7);

#SQL[@81,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (7);

#SQL[@83,N67]Result[]
create table fk_foreign_key_checks2_db0.t2(a int primary key,b int);

#SQL[@86,N25]Error[80]
insert into t1 values (8);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@87,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (8);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@89,N96]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (1,1),(2,2),(3,3),(4,4),(5,5),(6,6),(7,7),(8,8);

#SQL[@92,N25]Result[]
insert into t1 values (8);

#SQL[@93,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (8);

#SQL[@96,N25]Error[80]
insert into t1 values (9);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@97,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (9);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@100,N53]Error[84]
delete from fk_foreign_key_checks2_db0.t2 where a = 3;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@103,N26]Result[]
delete from t1 where b = 3;

#SQL[@104,N53]Result[]
delete from fk_foreign_key_checks2_db1.t3 where b = 3;

#SQL[@107,N53]Result[]
delete from fk_foreign_key_checks2_db0.t2 where a = 3;

#SQL[@110,N40]Error[81]
drop table fk_foreign_key_checks2_db0.t2;
internal error: can not drop table 't2' referenced by some foreign key constraint

#SQL[@113,N13]Result[]
drop table t1;

#SQL[@116,N40]Error[81]
drop table fk_foreign_key_checks2_db0.t2;
internal error: can not drop table 't2' referenced by some foreign key constraint

#SQL[@119,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (9);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@122,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (3);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@125,N54]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (3,3);

#SQL[@128,N52]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (9);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@131,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (3);

#SQL[@134,N40]Error[81]
drop table fk_foreign_key_checks2_db0.t2;
internal error: can not drop table 't2' referenced by some foreign key constraint

#SQL[@136,N24]Result[]
SET FOREIGN_KEY_CHECKS=0;

#SQL[@139,N40]Result[]
drop table fk_foreign_key_checks2_db0.t2;

#SQL[@142,N52]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (9);

#SQL[@144,N24]Result[]
SET FOREIGN_KEY_CHECKS=1;

#SQL[@146,N67]Result[]
create table fk_foreign_key_checks2_db0.t2(a int primary key,b int);

#SQL[@149,N53]Error[80]
insert into fk_foreign_key_checks2_db1.t3 values (10);
internal error: Cannot add or update a child row: a foreign key constraint fails

#SQL[@152,N102]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (1,1),(2,2),(3,3),(4,4),(5,5),(6,6),(7,7),(8,8),(9,9);

#SQL[@155,N56]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (10,10);

#SQL[@158,N53]Result[]
insert into fk_foreign_key_checks2_db1.t3 values (10);

#SQL[@161,N54]Error[84]
delete from fk_foreign_key_checks2_db0.t2 where a = 10;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@164,N40]Error[81]
drop table fk_foreign_key_checks2_db0.t2;
internal error: can not drop table 't2' referenced by some foreign key constraint

#SQL[@166,N40]Result[]
drop table fk_foreign_key_checks2_db1.t3;

#SQL[@169,N54]Result[]
delete from fk_foreign_key_checks2_db0.t2 where a = 10;

#SQL[@172,N40]Result[]
drop table fk_foreign_key_checks2_db0.t2;

#SQL[@174,N24]Result[]
SET FOREIGN_KEY_CHECKS=0;

#SQL[@176,N67]Result[]
create table fk_foreign_key_checks2_db0.t2(a int primary key,b int);

#SQL[@178,N24]Result[]
SET FOREIGN_KEY_CHECKS=1;

#SQL[@180,N60]Result[]
insert into fk_foreign_key_checks2_db0.t2 values (1,1),(2,2);

#SQL[@183,N53]Result[]
delete from fk_foreign_key_checks2_db0.t2 where a = 2;

#SQL[@186,N23]Result[]
drop table if exists t1;

#SQL[@187,N50]Result[]
drop table if exists fk_foreign_key_checks2_db1.t3;

#SQL[@188,N50]Result[]
drop table if exists fk_foreign_key_checks2_db0.t2;

#SQL[@189,N46]Result[]
drop database if exists fk_foreign_key_checks2;

#SQL[@190,N50]Result[]
drop database if exists fk_foreign_key_checks2_db0;

#SQL[@191,N50]Result[]
drop database if exists fk_foreign_key_checks2_db1;

