#SQL[@1,N27]Result[]
drop database if exists db1;

#SQL[@2,N19]Result[]
create database db1;

#SQL[@3,N7]Result[]
use db1;

#SQL[@4,N23]Result[]
drop table if exists t1;

#SQL[@5,N23]Result[]
create table t1 (a int);

#SQL[@6,N34]Result[]
insert into t1 values(1), (2), (4);

#SQL[@7,N23]Result[]
drop table if exists t2;

#SQL[@8,N23]Result[]
create table t2 (b int);

#SQL[@9,N34]Result[]
insert into t2 values(1), (2), (3);

#SQL[@10,N29]Result[]
update t1, t2 set a = 1, b =2;

#SQL[@11,N16]Result[1, 1, 1, 1]
select * from t1;
a
1
1
1

#SQL[@12,N35]Result[]
update t1, t2 set a = null, b =null;

#SQL[@13,N16]Result[1, 4, 4, 4]
select * from t2;
b
null
null
null

#SQL[@15,N23]Result[]
drop table if exists t1;

#SQL[@16,N23]Result[]
drop table if exists t2;

#SQL[@17,N23]Result[]
create table t1 (a int);

#SQL[@18,N34]Result[]
insert into t1 values(1), (2), (4);

#SQL[@19,N23]Result[]
drop table if exists t2;

#SQL[@20,N23]Result[]
create table t2 (b int);

#SQL[@21,N34]Result[]
insert into t2 values(1), (2), (3);

#SQL[@22,N78]Result[]
update t2 as t222, (select b from t2) as t22 set t222.b = 555 where t222.b = 3;

#SQL[@23,N17]Result[1, 1, 1, 3]
select  * from t2;
b
1
2
555

#SQL[@25,N23]Result[]
drop table if exists t1;

#SQL[@26,N23]Result[]
drop table if exists t2;

#SQL[@27,N37]Result[]
create table t1 (a int, b int, c int);

#SQL[@28,N52]Result[]
insert into t1 values(1, 2, 3), (4, 5, 6), (7, 8, 9);

#SQL[@29,N37]Result[]
create table t2 (a int, b int, c int);

#SQL[@30,N52]Result[]
insert into t2 values(1, 2, 3), (4, 5, 6), (7, 8, 9);

#SQL[@31,N83]Result[]
update t1 join t2 on t1.a = t2.a set t1.b = 222, t1.c = 333, t2.b = 222, t2.c = 333;

#SQL[@32,N16]Result[15, 19, 19, 19]
select * from t1;
a  ¦  b  ¦  c
1  ¦  222  ¦  333
4  ¦  222  ¦  333
7  ¦  222  ¦  333

#SQL[@33,N103]Result[]
with t11 as (select * from (select * from t1) as t22) update t11 join t2 on t11.a = t2.a set t2.b = 666;

#SQL[@34,N16]Result[15, 19, 19, 19]
select * from t2;
a  ¦  b  ¦  c
1  ¦  666  ¦  333
4  ¦  666  ¦  333
7  ¦  666  ¦  333

#SQL[@36,N23]Result[]
drop table if exists t1;

#SQL[@37,N23]Result[]
drop table if exists t2;

#SQL[@38,N49]Result[]
create table t1 (a int primary key, b int, c int);

#SQL[@39,N52]Result[]
insert into t1 values(1, 2, 3), (4, 5, 6), (7, 8, 9);

#SQL[@40,N37]Result[]
create table t2 (a int, b int, c int);

#SQL[@41,N52]Result[]
insert into t2 values(1, 2, 3), (4, 5, 6), (7, 8, 9);

#SQL[@42,N62]Result[]
update t1 join t2 on t1.a = t2.a set t1.a = 111 where t1.b = 2;

#SQL[@43,N16]Result[15, 15, 15, 17]
select * from t1;
a  ¦  b  ¦  c
4  ¦  5  ¦  6
7  ¦  8  ¦  9
111  ¦  2  ¦  3

#SQL[@45,N23]Result[]
drop table if exists t1;

#SQL[@46,N30]Result[]
create table t1 (a int, b int);

#SQL[@47,N44]Result[]
insert into t1 values (1, 2), (3, 4), (5, 6);

#SQL[@48,N31]Result[]
update t1 set a = 1 where a > 1;

#SQL[@49,N16]Result[8, 8, 8, 8]
select * from t1;
a  ¦  b
1  ¦  2
1  ¦  4
1  ¦  6

#SQL[@51,N23]Result[]
drop table if exists t2;

#SQL[@52,N42]Result[]
create table t2 (a int primary key, b int);

#SQL[@53,N36]Result[]
insert into t2 values (1, 2), (3, 4);

#SQL[@54,N16]Result[8, 8, 8]
select * from t2;
a  ¦  b
1  ¦  2
3  ¦  4

#SQL[@55,N31]Result[]
update t2 set a = 2 where a > 1;

#SQL[@56,N16]Result[8, 8, 8]
select * from t2;
a  ¦  b
1  ¦  2
2  ¦  4

#SQL[@57,N41]Result[]
update t2 set a = b, b = a +1 where a > 1;

#SQL[@58,N16]Result[8, 8, 8]
select * from t2;
a  ¦  b
1  ¦  2
4  ¦  3

#SQL[@60,N23]Result[]
drop table if exists t3;

#SQL[@61,N28]Result[]
create table t3 (a char(20));

#SQL[@62,N41]Result[]
insert into t3 values("hello"), ("world");

#SQL[@63,N16]Result[1, 5, 5]
select * from t3;
a
hello
world

#SQL[@64,N26]Result[]
update t3 set a = "modify";

#SQL[@65,N16]Result[1, 6, 6]
select * from t3;
a
modify
modify

#SQL[@67,N23]Result[]
drop table if exists t5;

#SQL[@68,N23]Result[]
create table t5(a date);

#SQL[@69,N96]Result[]
insert into t5 values ('20070210'), ('1997-02-10'), ('0001-04-28'), ('20041112'), ('0123-04-03');

#SQL[@70,N16]Result[1, 10, 10, 10, 10, 10]
select * from t5;
a
2007-02-10
1997-02-10
0001-04-28
2004-11-12
0123-04-03

#SQL[@71,N49]Result[]
update t5 set a = '20070212' where a = '20070210';

#SQL[@72,N16]Result[1, 10, 10, 10, 10, 10]
select * from t5;
a
1997-02-10
0001-04-28
2004-11-12
0123-04-03
2007-02-12

#SQL[@74,N23]Result[]
drop table if exists t7;

#SQL[@75,N37]Result[]
create table t7 (a int, b int, c int);

#SQL[@76,N56]Result[]
insert into t7 values (1, 2, 11), (3, 4, 11), (5, 6, 11);

#SQL[@77,N16]Result[15, 16, 16, 16]
select * from t7;
a  ¦  b  ¦  c
1  ¦  2  ¦  11
3  ¦  4  ¦  11
5  ¦  6  ¦  11

#SQL[@78,N43]Result[]
update t7 set a = b,  b = a + 1 where a > 1;

#SQL[@79,N16]Result[15, 16, 16, 16]
select * from t7;
a  ¦  b  ¦  c
1  ¦  2  ¦  11
4  ¦  4  ¦  11
6  ¦  6  ¦  11

#SQL[@81,N23]Result[]
drop table if exists t8;

#SQL[@82,N23]Result[]
create table t8 (a int);

#SQL[@83,N46]Result[]
insert into t8 values(1), (2), (3),  (4),  (5);

#SQL[@84,N16]Result[1, 1, 1, 1, 1, 1]
select * from t8;
a
1
2
3
4
5

#SQL[@85,N52]Result[]
update t8 set a = 111 where a > 2 order by a limit 2;

#SQL[@86,N16]Result[1, 1, 1, 1, 3, 3]
select * from t8;
a
1
2
5
111
111

#SQL[@88,N23]Result[]
drop table if exists t9;

#SQL[@89,N54]Result[]
CREATE TABLE t9 (a bigint(3), b bigint(5) primary key);

#SQL[@90,N33]Result[]
insert INTO t9 VALUES (1,1),(1,2);

#SQL[@91,N35]Result[]
update t9 set a=2 where a=1 limit 1;

#SQL[@92,N16]Result[8, 8, 8]
select * from t9;
a  ¦  b
1  ¦  2
2  ¦  1

#SQL[@94,N24]Result[]
drop table if exists t10;

#SQL[@95,N43]Result[]
create table t10 (a int primary key, b int);

#SQL[@96,N46]Result[]
insert into t10 values(1, 2),  (3, 4),  (5, 6);

#SQL[@97,N45]Result[]
update t10 set b = null, a = a +1 where a > 1;

#SQL[@98,N17]Result[8, 8, 11, 11]
select * from t10;
a  ¦  b
1  ¦  2
4  ¦  null
6  ¦  null

#SQL[@100,N24]Result[]
drop table if exists t11;

#SQL[@101,N31]Result[]
create table t11 (a int, b int);

#SQL[@102,N52]Result[]
insert into t11 values(1, null),  (3, 4),  (5, null);

#SQL[@103,N22]Result[]
update t11 set a = b+1;

#SQL[@104,N17]Result[8, 14, 8, 14]
select * from t11;
a  ¦  b
null  ¦  null
5  ¦  4
null  ¦  null

#SQL[@106,N23]Result[]
drop table if exists t1;

#SQL[@107,N35]Result[]
create table t1 (a int default 222);

#SQL[@108,N34]Result[]
insert into t1 values(1), (2), (3);

#SQL[@109,N25]Result[]
update t1 set a = default;

#SQL[@110,N16]Result[1, 3, 3, 3]
select * from t1;
a
222
222
222

#SQL[@112,N23]Result[]
drop table if exists t1;

#SQL[@113,N23]Result[]
drop table if exists t2;

#SQL[@114,N47]Result[]
create table t1 (a int, b int default 251 + 38);

#SQL[@115,N36]Result[]
insert into t1 values (1, 1), (2, 2);

#SQL[@116,N45]Result[]
create table t2 (a int, b int default 111* 3);

#SQL[@117,N36]Result[]
insert into t2 values (1, 1), (2, 2);

#SQL[@118,N67]Result[]
update t1 join t2 on t1.a = t2.a set t1.b = default, t2.a = default;

#SQL[@119,N16]Result[8, 10, 10]
select * from t1;
a  ¦  b
1  ¦  289
2  ¦  289

#SQL[@120,N16]Result[8, 11, 11]
select * from t2;
a  ¦  b
null  ¦  1
null  ¦  2

#SQL[@122,N23]Result[]
drop table if exists t1;

#SQL[@123,N59]Result[]
create table t1(a int auto_increment, b int auto_increment);

#SQL[@124,N47]Result[]
insert into t1 values(null, null), (null, null);

#SQL[@125,N16]Result[8, 8, 8]
select * from t1;
a  ¦  b
1  ¦  1
2  ¦  2

#SQL[@126,N45]Result[]
insert into t1 values(100, 200), (null, null);

#SQL[@127,N16]Result[8, 8, 8, 12, 12]
select * from t1;
a  ¦  b
1  ¦  1
2  ¦  2
100  ¦  200
101  ¦  201

#SQL[@128,N20]Error[47]
update t1 set a=null;
constraint violation: Column 'a' cannot be null

#SQL[@129,N16]Result[8, 8, 8, 12, 12]
select * from t1;
a  ¦  b
1  ¦  1
2  ¦  2
100  ¦  200
101  ¦  201

#SQL[@130,N20]Error[47]
update t1 set b=null;
constraint violation: Column 'b' cannot be null

#SQL[@131,N16]Result[8, 8, 8, 12, 12]
select * from t1;
a  ¦  b
1  ¦  1
2  ¦  2
100  ¦  200
101  ¦  201

#SQL[@132,N23]Result[]
drop table if exists t1;

#SQL[@133,N112]Result[]
create table t1(
id int,
a datetime ON UPDATE CURRENT_TIMESTAMP,
b datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
);

#SQL[@138,N28]Result[]
insert into t1(id) values(1);

#SQL[@139,N24]Result[9, 4]
select a is null from t1;
a is null
true

#SQL[@140,N33]Result[]
update t1 set id = 2 where id = 1;

#SQL[@141,N28]Result[13, 4]
select a is not null from t1;
a is not null
true

#SQL[@142,N51]Result[]
update t1  set id = 3,  a = '20121212' where id = 2;

#SQL[@143,N38]Result[2, 1]
select id from t1 where a = '20121212';
id
3

#SQL[@145,N23]Result[]
drop table if exists t1;

#SQL[@146,N45]Result[]
create table t1(a int, b int, primary key(a));

#SQL[@147,N27]Result[]
insert into t1 values(1, 1);

#SQL[@148,N22]Error[47]
update t1 set a = null;
constraint violation: Column 'a' cannot be null

#SQL[@150,N23]Result[]
drop table if exists t1;

#SQL[@151,N48]Result[]
create table t1(a int, b int, primary key(a, b));

#SQL[@152,N27]Result[]
insert into t1 values(1, 1);

#SQL[@153,N22]Error[47]
update t1 set a = null;
constraint violation: Column 'a' cannot be null

#SQL[@155,N23]Result[]
drop table if exists t1;

#SQL[@156,N48]Result[]
create table t1(a int, b int, primary key(a, b));

#SQL[@157,N27]Result[]
insert into t1 values(1, 2);

#SQL[@158,N27]Result[]
insert into t1 values(1, 3);

#SQL[@159,N27]Result[]
insert into t1 values(2, 2);

#SQL[@160,N27]Result[]
insert into t1 values(2, 3);

#SQL[@161,N31]Error[39]
update t1 set a = 2 where a = 1;
Duplicate entry '(2,2)' for key '(a,b)'

#SQL[@184,N23]Result[]
drop table if exists t1;

#SQL[@185,N69]Result[]
create table t1(a int, b int, c datetime on update CURRENT_TIMESTAMP);

#SQL[@186,N27]Result[]
insert into t1(a) values(1);

#SQL[@187,N31]Result[]
update t1 set a = 2 where a = 1;

#SQL[@188,N28]Result[13, 4]
select c is not null from t1;
c is not null
true

#SQL[@190,N23]Result[]
drop table if exists t1;

#SQL[@191,N42]Result[]
create table t1 (a int primary key, b int);

#SQL[@192,N29]Result[]
insert into t1 values (1,100);

#SQL[@193,N39]Result[1, 3]
select b from t1 where a = 1 for update;
b
100

#SQL[@195,N27]Result[]
drop database if exists db1;

#SQL[@196,N19]Result[]
create database db1;

#SQL[@197,N7]Result[]
use db1;

#SQL[@198,N52]Result[]
create table t1(a int primary key, b int unique key);

#SQL[@199,N19]Result[]
create database db2;

#SQL[@200,N7]Result[]
use db2;

#SQL[@201,N31]Result[]
insert into db1.t1 values (1,1);

#SQL[@202,N20]Result[8, 8]
select * from db1.t1;
a  ¦  b
1  ¦  1

#SQL[@203,N35]Result[]
update db1.t1 set b = 2 where a = 1;

#SQL[@204,N20]Result[8, 8]
select * from db1.t1;
a  ¦  b
1  ¦  2

#SQL[@205,N18]Result[]
delete from db1.t1;

#SQL[@206,N20]Result[]
select * from db1.t1;

#SQL[@207,N27]Result[]
drop database if exists db1;

#SQL[@208,N27]Result[]
drop database if exists db2;

