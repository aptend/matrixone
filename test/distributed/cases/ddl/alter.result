#SQL[@5,N20]Result[]
create database test;

#SQL[@6,N8]Result[]
use test;

#SQL[@9,N30]Result[]
drop table if exists foreign01;

#SQL[@10,N154]Result[]
create table foreign01(col1 int primary key,
                       col2 varchar(20),
                       col3 int,
                       col4 bigint);

#SQL[@14,N53]Result[]
insert into foreign01 values(1,'shujuku',100,3247984);

#SQL[@15,N62]Result[]
insert into foreign01 values(2,'数据库',328932,32324423432);

#SQL[@16,N30]Result[]
drop table if exists foreign02;

#SQL[@17,N196]Result[]
create table foreign02(col1 int,
                       col2 int,
                       col3 int primary key,
                       constraint fk foreign key fk(col1) references foreign01(col1));

#SQL[@21,N35]Result[]
insert into foreign02 values(1,1,1);

#SQL[@22,N35]Result[]
insert into foreign02 values(2,2,2);

#SQL[@23,N38]Error[84]
delete from foreign01 where col3 = 100;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@25,N27]Result[23, 253]
show create table foreign02;
Table  ¦  Create Table
foreign02  ¦  CREATE TABLE `foreign02` (
  `col1` int DEFAULT NULL,
  `col2` int DEFAULT NULL,
  `col3` int NOT NULL,
  PRIMARY KEY (`col3`),
  CONSTRAINT `fk` FOREIGN KEY (`col1`) REFERENCES `foreign01` (`col1`) ON DELETE RESTRICT ON UPDATE RESTRICT
)

#SQL[@26,N41]Result[]
alter table foreign02 drop foreign key fk;

#SQL[@27,N27]Result[23, 143]
show create table foreign02;
Table  ¦  Create Table
foreign02  ¦  CREATE TABLE `foreign02` (
  `col1` int DEFAULT NULL,
  `col2` int DEFAULT NULL,
  `col3` int NOT NULL,
  PRIMARY KEY (`col3`)
)

#SQL[@28,N20]Result[]
drop table foreign01;

#SQL[@29,N20]Result[]
drop table foreign02;

#SQL[@32,N24]Result[]
drop table if exists ti1;

#SQL[@33,N24]Result[]
drop table if exists tm1;

#SQL[@34,N24]Result[]
drop table if exists ti2;

#SQL[@35,N24]Result[]
drop table if exists tm2;

#SQL[@37,N47]Result[]
create  table ti1(a INT not null, b INT, c INT);

#SQL[@38,N47]Result[]
create  table tm1(a INT not null, b INT, c INT);

#SQL[@39,N65]Result[]
create  table ti2(a INT primary key AUTO_INCREMENT, b INT, c INT);

#SQL[@40,N65]Result[]
create  table tm2(a INT primary key AUTO_INCREMENT, b INT, c INT);

#SQL[@41,N39]Result[]
insert into ti1 values (1,1,1), (2,2,2);

#SQL[@42,N39]Result[]
insert into ti2 values (1,1,1), (2,2,2);

#SQL[@43,N39]Result[]
insert into tm1 values (1,1,1), (2,2,2);

#SQL[@44,N39]Result[]
insert into tm2 values (1,1,1), (2,2,2);

#SQL[@46,N68]Result[]
alter table ti1 add constraint fi1 foreign key (b) references ti2(a);

#SQL[@47,N68]Result[]
alter table tm1 add constraint fm1 foreign key (b) references tm2(a);

#SQL[@48,N21]Result[23, 197]
show create table ti1;
Table  ¦  Create Table
ti1  ¦  CREATE TABLE `ti1` (
  `a` int NOT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL,
  CONSTRAINT `fi1` FOREIGN KEY (`b`) REFERENCES `ti2` (`a`) ON DELETE RESTRICT ON UPDATE RESTRICT
)

#SQL[@49,N21]Result[23, 197]
show create table tm1;
Table  ¦  Create Table
tm1  ¦  CREATE TABLE `tm1` (
  `a` int NOT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL,
  CONSTRAINT `fm1` FOREIGN KEY (`b`) REFERENCES `tm2` (`a`) ON DELETE RESTRICT ON UPDATE RESTRICT
)

#SQL[@51,N27]Error[84]
delete from ti2 where c = 1;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@52,N27]Error[84]
delete from tm2 where c = 1;
internal error: Cannot delete or update a parent row: a foreign key constraint fails

#SQL[@54,N36]Result[]
alter table ti1 drop foreign key fi1;

#SQL[@55,N36]Result[]
alter table tm1 drop foreign key fm1;

#SQL[@57,N21]Result[23, 98]
show create table ti1;
Table  ¦  Create Table
ti1  ¦  CREATE TABLE `ti1` (
  `a` int NOT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL
)

#SQL[@58,N21]Result[23, 98]
show create table tm1;
Table  ¦  Create Table
tm1  ¦  CREATE TABLE `tm1` (
  `a` int NOT NULL,
  `b` int DEFAULT NULL,
  `c` int DEFAULT NULL
)

#SQL[@60,N27]Result[]
delete from ti2 where c = 1;

#SQL[@61,N27]Result[]
delete from tm2 where c = 1;

#SQL[@63,N15]Result[]
drop table  ti1;

#SQL[@64,N15]Result[]
drop table  tm1;

#SQL[@65,N15]Result[]
drop table  ti2;

#SQL[@66,N15]Result[]
drop table  tm2;

#SQL[@132,N28]Result[]
drop table if exists index01;

#SQL[@133,N45]Result[]
create table index01(col1 int,key key1(col1));

#SQL[@134,N23]Result[233, 127]
show index from index01;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index01  ¦  1  ¦  key1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  YES  ¦  col1

#SQL[@135,N35]Result[]
alter table index01 drop index key1;

#SQL[@136,N23]Result[]
show index from index01;

#SQL[@137,N55]Result[]
alter table Index01 add index key1(col1) comment 'test';

#SQL[@138,N23]Result[233, 131]
show index from index01;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index01  ¦  1  ¦  key1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  test  ¦    ¦  YES  ¦  col1

#SQL[@139,N46]Result[]
alter table index01 alter index key1 invisible;

#SQL[@140,N23]Result[233, 130]
show index from index01;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index01  ¦  1  ¦  key1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  test  ¦    ¦  NO  ¦  col1

#SQL[@141,N18]Result[]
drop table index01;

#SQL[@143,N28]Result[]
drop table if exists index02;

#SQL[@144,N60]Result[]
create table index02(col1 int,key key1(col1) comment 'test');

#SQL[@145,N35]Result[]
alter table index02 drop index key1;

#SQL[@146,N23]Result[]
show index from index02;

#SQL[@147,N40]Result[]
alter table index02 add index Key1(col1);

#SQL[@148,N46]Result[]
alter table index02 alter index key1 invisible;

#SQL[@149,N23]Result[233, 126]
show index from index02;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index02  ¦  1  ¦  key1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  NO  ¦  col1

#SQL[@150,N18]Result[]
drop table index02;

#SQL[@152,N28]Result[]
drop table if exists index03;

#SQL[@153,N50]Result[]
create table index03(col1 int, col2 int, col3 int);

#SQL[@154,N63]Result[]
alter table index03 add unique key(col1,col2) comment 'abcTest';

#SQL[@155,N23]Result[233, 134, 134]
show index from index03;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index03  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  abcTest  ¦    ¦  YES  ¦  col1
index03  ¦  0  ¦  col1  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  abcTest  ¦    ¦  YES  ¦  col2

#SQL[@156,N46]Result[]
alter table index03 alter index col1 invisible;

#SQL[@157,N23]Result[233, 133, 133]
show index from index03;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index03  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  abcTest  ¦    ¦  NO  ¦  col1
index03  ¦  0  ¦  col1  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  abcTest  ¦    ¦  NO  ¦  col2

#SQL[@158,N18]Result[]
drop table index03;

#SQL[@160,N28]Result[]
drop table if exists index03;

#SQL[@161,N61]Result[]
create table index03(fld1 int, key key1(fld1) comment 'test');

#SQL[@162,N23]Result[233, 131]
show index from index03;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index03  ¦  1  ¦  key1  ¦  1  ¦  fld1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦  test  ¦    ¦  YES  ¦  fld1

#SQL[@163,N35]Result[]
alter table index03 drop index key1;

#SQL[@164,N23]Result[]
show index from index03;

#SQL[@165,N18]Result[]
drop table index03;

#SQL[@167,N28]Result[]
drop table if exists index04;

#SQL[@168,N82]Result[]
create table index04(col1 int, col2 char, col3 varchar(10),primary key(col1,col2));

#SQL[@169,N23]Result[233, 127, 127]
show index from index04;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index04  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index04  ¦  0  ¦  PRIMARY  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col2

#SQL[@170,N35]Result[]
alter table index04 add index(col1);

#SQL[@171,N46]Result[]
alter table index04 alter index col1 invisible;

#SQL[@172,N23]Result[233, 127, 127, 123]
show index from index04;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index04  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index04  ¦  0  ¦  PRIMARY  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col2
index04  ¦  1  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  NO  ¦  col1

#SQL[@173,N44]Result[]
alter table index04 alter index col1 visible;

#SQL[@174,N23]Result[233, 127, 127, 124]
show index from index04;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index04  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index04  ¦  0  ¦  PRIMARY  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col2
index04  ¦  1  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1

#SQL[@175,N18]Result[]
drop table index04;

#SQL[@177,N28]Result[]
drop table if exists index05;

#SQL[@178,N57]Result[]
create table index05(col1 int, col2 bigint, col3 decimal);

#SQL[@179,N23]Result[]
show index from index05;

#SQL[@180,N45]Result[]
alter table index05 add unique key(col1,col2);

#SQL[@181,N23]Result[233, 127, 127]
show index from index05;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index05  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index05  ¦  0  ¦  col1  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  YES  ¦  col2

#SQL[@182,N46]Result[]
alter table index05 alter index col1 invisible;

#SQL[@183,N23]Result[233, 126, 126]
show index from index05;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index05  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  NO  ¦  col1
index05  ¦  0  ¦  col1  ¦  2  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  NO  ¦  col2

#SQL[@184,N18]Result[]
drop table index05;

#SQL[@186,N28]Result[]
drop table if exists index06;

#SQL[@187,N80]Result[]
create table index06(col1 int not null,col2 binary, col3 float,unique key(col1));

#SQL[@188,N42]Result[]
alter table index06 add unique index(col2);

#SQL[@189,N23]Result[233, 124, 127]
show index from index06;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index06  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index06  ¦  0  ¦  col2  ¦  1  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  YES  ¦  col2

#SQL[@190,N46]Result[]
alter table index06 alter index col2 invisible;

#SQL[@191,N23]Result[233, 124, 126]
show index from index06;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index06  ¦  0  ¦  col1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index06  ¦  0  ¦  col2  ¦  1  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦  YES  ¦    ¦    ¦    ¦    ¦  NO  ¦  col2

#SQL[@192,N18]Result[]
drop table index06;

#SQL[@194,N28]Result[]
drop table if exists index07;

#SQL[@195,N255]Result[]
CREATE TABLE index07(
                        col1 INT NOT NULL,
                        col2 DATE NOT NULL,
                        col3 VARCHAR(16) NOT NULL,
                        col4 int unsigned NOT NULL,
                        PRIMARY KEY(col1)
);

#SQL[@203,N54]Result[]
insert into index07 values(1, '1980-12-17','Abby', 21);

#SQL[@204,N53]Result[]
insert into index07 values(2, '1981-02-20','Bob', 22);

#SQL[@205,N55]Result[]
insert into index07 values(3, '1981-02-22','Carol', 23);

#SQL[@207,N58]Result[]
alter table index07 add constraint unique key (col3, col4);

#SQL[@208,N64]Result[]
alter table index07 add constraint unique key wwwww (col3, col4);

#SQL[@209,N71]Result[]
alter table index07 add constraint abctestabbc unique key zxxxxx (col3);

#SQL[@210,N23]Result[233, 127, 124, 124, 125, 125, 126]
show index from index07;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index07  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index07  ¦  0  ¦  col3  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  col3  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index07  ¦  0  ¦  wwwww  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  wwwww  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index07  ¦  0  ¦  zxxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3

#SQL[@211,N45]Result[]
alter table index07 add unique key idx1(col3);

#SQL[@212,N23]Result[233, 127, 124, 124, 125, 125, 126, 124]
show index from index07;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index07  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index07  ¦  0  ¦  col3  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  col3  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index07  ¦  0  ¦  wwwww  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  wwwww  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index07  ¦  0  ¦  zxxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  idx1  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3

#SQL[@213,N57]Result[]
alter table index07 add constraint idx2 unique key (col3);

#SQL[@214,N57]Error[25]
alter table index07 add constraint idx2 unique key (col4);
duplicate key name 'idx2'

#SQL[@215,N47]Result[]
alter table index07 alter index wwwww invisible;

#SQL[@216,N23]Result[233, 127, 124, 124, 126, 124, 124, 124, 124]
show index from index07;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index07  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index07  ¦  0  ¦  col3  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  col3  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index07  ¦  0  ¦  zxxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  idx1  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  idx2  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index07  ¦  0  ¦  wwwww  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  NO  ¦  col3
index07  ¦  0  ¦  wwwww  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  NO  ¦  col4

#SQL[@217,N18]Result[]
drop table index07;

#SQL[@219,N28]Result[]
drop table if exists index08;

#SQL[@220,N255]Result[]
CREATE TABLE index08(
                        col1 INT NOT NULL,
                        col2 DATE NOT NULL,
                        col3 VARCHAR(16) NOT NULL,
                        col4 int unsigned NOT NULL,
                        PRIMARY KEY(col1)
);

#SQL[@228,N54]Result[]
insert into index08 values(1, '1980-12-17','Abby', 21);

#SQL[@229,N53]Result[]
insert into index08 values(2, '1981-02-20','Bob', 22);

#SQL[@231,N60]Result[]
alter table index08 add constraint unique index (col3, col4);

#SQL[@232,N59]Error[220]
alter table index08 add constraint index wwwww (col3, col4);
SQL parser error: You have an error in your SQL syntax; check the manual that corresponds to your MatrixOne server version for the right syntax to use. syntax error at line 1 column 40 near \" index wwwww (col3, col4)\";

#SQL[@233,N61]Result[]
alter table index08 add constraint unique index zxxxxx (col3);

#SQL[@234,N23]Result[233, 127, 124, 124, 126]
show index from index08;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index08  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index08  ¦  0  ¦  col3  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index08  ¦  0  ¦  col3  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index08  ¦  0  ¦  zxxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3

#SQL[@235,N41]Result[]
alter table index08 add index zxxxx(col3);

#SQL[@236,N23]Result[233, 127, 124, 124, 126, 125]
show index from index08;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index08  ¦  0  ¦  PRIMARY  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index08  ¦  0  ¦  col3  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index08  ¦  0  ¦  col3  ¦  2  ¦  col4  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col4
index08  ¦  0  ¦  zxxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3
index08  ¦  1  ¦  zxxxx  ¦  1  ¦  col3  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col3

#SQL[@237,N18]Result[]
drop table index08;

#SQL[@239,N28]Result[]
drop table if exists index09;

#SQL[@240,N263]Result[]
CREATE TABLE index09(
                        col1 INT NOT NULL,
                        col2 DATE NOT NULL,
                        col3 VARCHAR(16) NOT NULL,
                        col4 int unsigned NOT NULL,
                        UNIQUE KEY u1 (col1 DESC)
);

#SQL[@248,N54]Result[]
insert into index09 values(1, '1980-12-17','Abby', 21);

#SQL[@249,N53]Result[]
insert into index09 values(2, '1981-02-20','Bob', 22);

#SQL[@250,N23]Result[233, 122]
show index from index09;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index09  ¦  0  ¦  u1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1

#SQL[@251,N59]Error[22]
ALTER TABLE emp ADD UNIQUE INDEX idx1 (col1 ASC, col2 DESC);
no such table test.emp

#SQL[@252,N23]Result[233, 122]
show index from index09;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index09  ¦  0  ¦  u1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1

#SQL[@253,N18]Result[]
drop table index09;

#SQL[@255,N28]Result[]
drop table if exists index10;

#SQL[@256,N306]Result[]
CREATE TABLE index10(
                        col1 INT NOT NULL,
                        col2 DATE NOT NULL,
                        col3 VARCHAR(16) NOT NULL,
                        col4 int unsigned NOT NULL,
                        INDEX idx1 (col1 DESC),
                        KEY idx2 (col2 DESC)
);

#SQL[@265,N54]Result[]
insert into index10 values(1, '1980-12-17','Abby', 21);

#SQL[@266,N53]Result[]
insert into index10 values(2, '1981-02-20','Bob', 22);

#SQL[@267,N23]Result[233, 124, 124]
show index from index10;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index10  ¦  1  ¦  idx1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index10  ¦  1  ¦  idx2  ¦  1  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col2

#SQL[@268,N52]Error[22]
ALTER TABLE emp ADD INDEX idx3 (col1 ASC, col2 DESC);
no such table test.emp

#SQL[@269,N23]Result[233, 124, 124]
show index from index10;
Table  ¦  Non_unique  ¦  Key_name  ¦  Seq_in_index  ¦  Column_name  ¦  Collation  ¦  Cardinality  ¦  Sub_part  ¦  Packed  ¦  Null  ¦  Index_type  ¦  Comment  ¦  Index_comment  ¦  Index_params  ¦  Visible  ¦  Expression
index10  ¦  1  ¦  idx1  ¦  1  ¦  col1  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col1
index10  ¦  1  ¦  idx2  ¦  1  ¦  col2  ¦  A  ¦  0  ¦  NULL  ¦  NULL  ¦    ¦    ¦    ¦    ¦    ¦  YES  ¦  col2

#SQL[@270,N18]Result[]
drop table index10;

#SQL[@272,N70]Result[]
CREATE TABLE `t2` (
`a` INT DEFAULT NULL
) COMMENT='New table comment';

#SQL[@276,N31]Error[50]
alter table t2 drop primary key;
Can't DROP 'PRIMARY'; check that column/key exists

#SQL[@277,N32]Error[76]
alter table t2 AUTO_INCREMENT=10;
invalid input: unsupported alter option in inplace mode: auto_increment = 10

#SQL[@278,N27]Result[]
alter table t2 disable keys;

#SQL[@280,N57]Result[]
CREATE TABLE `t3` (
`a` INT NOT NULL,
PRIMARY KEY (`a`)
);

#SQL[@284,N31]Result[]
alter table t3 drop primary key;

#SQL[@287,N28]Result[]
drop table if exists index03;

#SQL[@288,N50]Result[]
create table index03(col1 int, col2 int, col3 int);

#SQL[@289,N34]Result[]
insert into index03 values (1,2,1);

#SQL[@290,N34]Result[]
insert into index03 values (2,3,4);

#SQL[@291,N35]Result[]
insert into index03 values (1,2,10);

#SQL[@292,N28]Result[8, 1]
select count(*) from index03;
count(*)
3

#SQL[@293,N73]Error[52]
alter table index03 add unique key `tempKey`(col1,col2) comment 'abcTest';
Duplicate entry '(1,2)' for key '__mo_index_idx_col'

#SQL[@294,N23]Result[]
show index from index03;

#SQL[@295,N28]Result[8, 1]
select count(*) from index03;
count(*)
3

#SQL[@296,N18]Result[]
drop table index03;

#SQL[@299,N23]Result[]
drop table if exists t4;

#SQL[@300,N56]Result[]
create table t4(col1 varchar(256) primary key, col2 int);

#SQL[@301,N90]Result[]
insert into t4 select "matrixone " || "mo " || result, 1 from generate_series (1, 500000)g;

#SQL[@302,N23]Result[8, 6]
select count(*) from t4;
count(*)
500000

#SQL[@303,N47]Result[]
alter table t4 add unique key `title01`(`col1`);

#SQL[@304,N20]Result[23, 144]
show create table t4;
Table  ¦  Create Table
t4  ¦  CREATE TABLE `t4` (
  `col1` varchar(256) NOT NULL,
  `col2` int DEFAULT NULL,
  PRIMARY KEY (`col1`),
  UNIQUE KEY `title01` (`col1`)
)

#SQL[@305,N23]Result[8, 6]
select count(*) from t4;
count(*)
500000

#SQL[@306,N13]Result[]
drop table t4;

#SQL[@309,N23]Result[]
drop table if exists t5;

#SQL[@310,N56]Result[]
create table t5(col1 varchar(256) primary key, col2 int);

#SQL[@311,N90]Result[]
insert into t5 select "matrixone " || "mo " || result, 1 from generate_series (1, 500000)g;

#SQL[@312,N23]Result[8, 6]
select count(*) from t5;
count(*)
500000

#SQL[@313,N59]Result[]
alter table t5 add unique key `title01`(`col1`) using btree;

#SQL[@314,N20]Result[23, 144]
show create table t5;
Table  ¦  Create Table
t5  ¦  CREATE TABLE `t5` (
  `col1` varchar(256) NOT NULL,
  `col2` int DEFAULT NULL,
  PRIMARY KEY (`col1`),
  UNIQUE KEY `title01` (`col1`)
)

#SQL[@315,N23]Result[8, 6]
select count(*) from t5;
count(*)
500000

#SQL[@316,N13]Result[]
drop table t5;

#SQL[@318,N18]Result[]
drop database test;

#SQL[@320,N33]Result[]
drop database if exists `collate`;

#SQL[@321,N25]Result[]
create database `collate`;

#SQL[@322,N13]Result[]
use `collate`;

#SQL[@323,N23]Result[]
drop table if exists t6;

#SQL[@324,N45]Result[]
create table t6(col1 int, col2 int, col3 int);

#SQL[@325,N29]Result[]
insert into t6 values (1,2,1);

#SQL[@326,N66]Result[]
alter table t6 add unique key tempKey(col1,col2) comment 'abcTest';

#SQL[@327,N13]Result[]
drop table t6;

#SQL[@328,N23]Result[]
drop database `collate`;

#SQL[@330,N38]Result[]
drop database if exists `current_time`;

#SQL[@331,N30]Result[]
create database `current_time`;

#SQL[@332,N18]Result[]
use `current_time`;

#SQL[@333,N23]Result[]
drop table if exists t7;

#SQL[@334,N45]Result[]
create table t7(col1 int, col2 int, col3 int);

#SQL[@335,N29]Result[]
insert into t7 values (1,2,1);

#SQL[@336,N73]Result[]
alter table t7 add unique index tempKey(col1,col2) comment 'unique index';

#SQL[@337,N13]Result[]
drop table t7;

#SQL[@338,N28]Result[]
drop database `current_time`;

#SQL[@340,N30]Result[]
drop database if exists `drop`;

#SQL[@341,N22]Result[]
create database `drop`;

#SQL[@342,N10]Result[]
use `drop`;

#SQL[@343,N23]Result[]
drop table if exists t8;

#SQL[@344,N49]Result[]
create table t8(col1 char, col2 int, col3 binary);

#SQL[@345,N33]Result[]
insert into t8 values('a', 33, 1);

#SQL[@346,N34]Result[]
insert into t8 values('c', 231, 0);

#SQL[@347,N53]Result[]
alter table t8 add key pk(col1) comment 'primary key';

#SQL[@348,N16]Result[24, 16, 17]
select * from t8;
col1  ¦  col2  ¦  col3
a  ¦  33  ¦  1
c  ¦  231  ¦  0

#SQL[@349,N13]Result[]
drop table t8;

#SQL[@350,N20]Result[]
drop database `drop`;

#SQL[@357,N37]Result[]
set global lower_case_table_names = 0;

#SQL[@358,N28]Result[]
drop database if exists test;

#SQL[@359,N20]Result[]
create database test;

#SQL[@360,N8]Result[]
use test;

#SQL[@361,N27]Result[]
drop table if exists test01;

#SQL[@362,N62]Result[]
create table test01 (col1 int, col2 decimal, col3 varchar(50));

#SQL[@363,N57]Result[]
insert into test01 values (1, 3242434.423, '3224332r32r');

#SQL[@364,N60]Result[]
insert into test01 values (2, 39304.3424, '343234343213124');

#SQL[@365,N44]Result[]
insert into test01 values (3, 372.324, '00');

#SQL[@367,N47]Result[]
alter table test01 rename column col1 to newCol;

#SQL[@368,N24]Result[23, 137]
show create table test01;
Table  ¦  Create Table
test01  ¦  CREATE TABLE `test01` (
  `newCol` int DEFAULT NULL,
  `col2` decimal(38,0) DEFAULT NULL,
  `col3` varchar(50) DEFAULT NULL
)

#SQL[@369,N18]Result[]
drop database test;

#SQL[@370,N37]Result[]
set global lower_case_table_names = 1;

#SQL[@375,N30]Result[]
drop database if exists test01;

#SQL[@376,N22]Result[]
create database test01;

#SQL[@377,N10]Result[]
use test01;

#SQL[@378,N24]Result[]
drop table if exists s3t;

#SQL[@379,N57]Result[]
create table s3t (a int, b int, c int, primary key(a, b));

#SQL[@380,N72]Result[]
insert into s3t select result, 2, 12 from generate_series(1, 30000, 1) g;

#SQL[@381,N38]Result[]
alter table s3t modify column b bigint;

#SQL[@382,N21]Result[23, 122]
show create table s3t;
Table  ¦  Create Table
s3t  ¦  CREATE TABLE `s3t` (
  `a` int NOT NULL,
  `b` bigint NOT NULL,
  `c` int DEFAULT NULL,
  PRIMARY KEY (`a`,`b`)
)

#SQL[@383,N20]Result[]
drop database test01;

#SQL[@388,N28]Result[]
drop database if exists test;

#SQL[@389,N20]Result[]
create database test;

#SQL[@390,N8]Result[]
use test;

#SQL[@391,N5]Result[]
begin;

#SQL[@392,N24]Result[]
drop table if exists s3t;

#SQL[@393,N57]Result[]
create table s3t (a int, b int, c int, primary key(a, b));

#SQL[@394,N72]Result[]
insert into s3t select result, 2, 12 from generate_series(1, 30000, 1) g;

#SQL[@395,N30]Result[]
delete from s3t where a < 1000;

#SQL[@396,N6]Result[]
commit;

#SQL[@397,N18]Result[]
drop database test;

#SQL[@401,N36]Result[]
drop database if exists varchar_test;

#SQL[@402,N28]Result[]
create database varchar_test;

#SQL[@403,N16]Result[]
use varchar_test;

#SQL[@406,N87]Result[]
create table t1 (
    id int primary key,
    name varchar(20),
    email varchar(50)
);

#SQL[@412,N55]Result[]
insert into t1 values (1, 'Alice', 'alice@example.com');

#SQL[@413,N51]Result[]
insert into t1 values (2, 'Bob', 'bob@example.com');

#SQL[@416,N45]Result[]
alter table t1 modify column name varchar(80);

#SQL[@417,N47]Result[]
alter table t1 modify column email varchar(150);

#SQL[@419,N16]Result[23, 35, 31]
select * from t1;
id  ¦  name  ¦  email
1  ¦  Alice  ¦  alice@example.com
2  ¦  Bob  ¦  bob@example.com

#SQL[@420,N20]Result[23, 143]
show create table t1;
Table  ¦  Create Table
t1  ¦  CREATE TABLE `t1` (
  `id` int NOT NULL,
  `name` varchar(80) DEFAULT NULL,
  `email` varchar(150) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

#SQL[@423,N103]Result[]
create table t2 (
    id int primary key,
    name varchar(20) not null,
    description varchar(100)
);

#SQL[@429,N50]Result[]
insert into t2 values (1, 'Test1', 'Description1');

#SQL[@430,N50]Result[]
insert into t2 values (2, 'Test2', 'Description2');

#SQL[@433,N54]Result[]
alter table t2 modify column name varchar(80) not null;

#SQL[@434,N53]Result[]
alter table t2 modify column description varchar(200);

#SQL[@436,N16]Result[29, 30, 30]
select * from t2;
id  ¦  name  ¦  description
1  ¦  Test1  ¦  Description1
2  ¦  Test2  ¦  Description2

#SQL[@437,N20]Result[23, 145]
show create table t2;
Table  ¦  Create Table
t2  ¦  CREATE TABLE `t2` (
  `id` int NOT NULL,
  `name` varchar(80) NOT NULL,
  `description` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

#SQL[@440,N117]Result[]
create table t3 (
    id int primary key,
    col1 varchar(10),
    col2 varchar(20) not null,
    col3 varchar(30)
);

#SQL[@447,N43]Result[]
insert into t3 values (1, 'a', 'bb', 'ccc');

#SQL[@448,N49]Result[]
insert into t3 values (2, 'aa', 'bbbb', 'cccccc');

#SQL[@451,N120]Result[]
alter table t3
modify column col1 varchar(50),
modify column col2 varchar(100) not null,
modify column col3 varchar(150);

#SQL[@456,N16]Result[32, 25, 31]
select * from t3;
id  ¦  col1  ¦  col2  ¦  col3
1  ¦  a  ¦  bb  ¦  ccc
2  ¦  aa  ¦  bbbb  ¦  cccccc

#SQL[@457,N20]Result[23, 174]
show create table t3;
Table  ¦  Create Table
t3  ¦  CREATE TABLE `t3` (
  `id` int NOT NULL,
  `col1` varchar(50) DEFAULT NULL,
  `col2` varchar(100) NOT NULL,
  `col3` varchar(150) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

#SQL[@460,N137]Result[]
create table t4 (
    id int primary key,
    name varchar(20) not null,
    email varchar(50),
    status varchar(10) default 'active'
);

#SQL[@467,N70]Result[]
insert into t4 (id, name, email) values (1, 'User1', 'user1@test.com');

#SQL[@468,N90]Result[]
insert into t4 (id, name, email, status) values (2, 'User2', 'user2@test.com', 'inactive');

#SQL[@471,N55]Result[]
alter table t4 modify column name varchar(100) not null;

#SQL[@472,N47]Result[]
alter table t4 modify column email varchar(200);

#SQL[@474,N16]Result[35, 44, 46]
select * from t4;
id  ¦  name  ¦  email  ¦  status
1  ¦  User1  ¦  user1@test.com  ¦  active
2  ¦  User2  ¦  user2@test.com  ¦  inactive

#SQL[@475,N20]Result[23, 181]
show create table t4;
Table  ¦  Create Table
t4  ¦  CREATE TABLE `t4` (
  `id` int NOT NULL,
  `name` varchar(100) NOT NULL,
  `email` varchar(200) DEFAULT NULL,
  `status` varchar(10) DEFAULT 'active',
  PRIMARY KEY (`id`)
)

#SQL[@478,N68]Result[]
create table t5 (
    id int primary key,
    content varchar(100)
);

#SQL[@483,N42]Result[]
insert into t5 values (1, 'Short content');

#SQL[@484,N103]Result[]
insert into t5 values (2, 'This is a longer content that tests the varchar modification functionality');

#SQL[@487,N50]Result[]
alter table t5 modify column content varchar(1000);

#SQL[@489,N16]Result[15, 20, 81]
select * from t5;
id  ¦  content
1  ¦  Short content
2  ¦  This is a longer content that tests the varchar modification functionality

#SQL[@490,N20]Result[23, 111]
show create table t5;
Table  ¦  Create Table
t5  ¦  CREATE TABLE `t5` (
  `id` int NOT NULL,
  `content` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

#SQL[@492,N5]Result[]
begin;

#SQL[@494,N51]Result[]
alter table t5 rename column content to new_content;

#SQL[@497,N53]Result[40, 79]
select mo_ctl('dn', 'flush', 'mo_catalog.mo_columns');
mo_ctl(dn, flush, mo_catalog.mo_columns)
{
  "method": "Flush",
  "result": [
    {
      "returnStr": "OK"
    }
  ]
}


#SQL[@499,N18]Result[11, 1]
select sleep(0.51);
sleep(0.51)
0

#SQL[@501,N6]Result[]
commit;

#SQL[@503,N20]Result[23, 115]
show create table t5;
Table  ¦  Create Table
t5  ¦  CREATE TABLE `t5` (
  `id` int NOT NULL,
  `new_content` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`id`)
)

#SQL[@506,N33]Result[]
set experimental_fulltext_index=1;

#SQL[@507,N42]Result[]
create table v1 (a int primary key, b int);

#SQL[@509,N36]Result[]
insert into v1 values (1, 1), (2, 1);

#SQL[@511,N45]Error[31]
alter table v1 modify column b int unique key;
Duplicate entry '1' for key 'b'

#SQL[@513,N67]Result[]
create table v2 (a int primary key, b int, c text, fulltext f01(c));

#SQL[@515,N48]Result[]
insert into v2 values (1, 1, "42"), (2, 1, "43");

#SQL[@517,N45]Error[48]
alter table v2 modify column b int unique key;
Duplicate entry '1' for key '__mo_index_idx_col'

#SQL[@520,N72]Result[]
create table v3 (a int primary key, b int, c text, unique index IdX2(b));

#SQL[@522,N92]Result[]
load data infile  '$resources/load_data/dup_load.csv' into table v3 fields terminated by ',';

#SQL[@524,N44]Error[31]
insert into v3 values (1, 1, "boroborodesu");
Duplicate entry '1' for key 'a'

#SQL[@525,N45]Error[31]
insert into v3 values (10, 2, "boroborodesu");
Duplicate entry '2' for key 'b'

#SQL[@527,N31]Result[]
alter table v3 add column d int;

#SQL[@530,N13]Result[]
drop table t1;

#SQL[@531,N13]Result[]
drop table t2;

#SQL[@532,N13]Result[]
drop table t3;

#SQL[@533,N13]Result[]
drop table t4;

#SQL[@534,N13]Result[]
drop table t5;

#SQL[@535,N13]Result[]
drop table v1;

#SQL[@536,N13]Result[]
drop table v2;

#SQL[@537,N13]Result[]
drop table v3;

#SQL[@538,N26]Result[]
drop database varchar_test;

